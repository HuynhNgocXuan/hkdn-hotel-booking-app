const handleBookRoom = () => {
    if (!userId) return toast.error("Oops! Make sure you are logged in.");
    if (!Hotel?.userId)
      return toast.error(
        "Something went wrong, refresh the page and try again"
      );

      setBookingIsLoading(true);

      const bookingRoomData = {
        room : Room,
        totalPrice: booking.totalPrice,
        breakFastIncluded: booking.breakFastIncluded,
        checkInDate: booking.startDate,
        checkOutDate: booking.endDate,
      };
      setRoomData(bookingRoomData);

      fetch("/api/create-payment-intent", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          booking: {
            hotelOwnerId: Hotel.userId,
            hotelId: Hotel.id,
            roomId: Room.id,
            startDate: bookingRoomData.checkInDate,
            endDate: bookingRoomData.checkOutDate,
            breakFastIncluded: bookingRoomData.breakFastIncluded,
            totalPrice: bookingRoomData.totalPrice,
            currency: "usd",
          },
          payment_intent_id: paymentIntentId,
        }),
      })
        .then((res) => {
          setBookingIsLoading(false);
          if (res.status === 401) return router.push("/login");
          return res.json();
        })
        .then((data) => {
          setClientSecret(data.paymentIntent.client_secret);
          setPaymentIntentId(data.paymentIntent.id);
          router.push("/book-room");
        })
        .catch((error) => {
          console.error("Error:", error);
          toast.error(
            `Error: ${
              error.message ||
              error.response?.data?.message ||
              "Something went wrong!"
            }`
          );
        });
    } 
  };